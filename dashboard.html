<!DOCTYPE html>
<html lang="no">
<head>
<title>NLBs produksjonssystem</title>
<style>

* { font-family: sans-serif; }

body > * { text-align: center; }

html, body {
    height: 100%;
    margin: 0;
    padding: 0;
}

img {
    padding: 0;
    display: block;
    margin: 0 auto;
    max-height: 90vh;
    max-width: 90vw;
}

h1 { font-size: 2.5vh; margin: 0.1em auto; }
p#uid { font-size: 1.5vh; margin: 0.1em auto; }

</style>
</head>
<body>

<h1>NLBs produksjonssystem</h1>
<p id="uid"></p>

<figure>
<img id="graph" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" alt="Diagram over NLBs produksjonssystem."/>
<img id="graph-load" src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==" style="display: none;"/>
</figure>

<script>
window.onload = function() {
    var image = document.getElementById("graph");
    var imageLoad = document.getElementById("graph-load");
    
    imagefile = window.location.href.split("/");
    imagefile = imagefile[imagefile.length-1];
    imagefile = imagefile.split(".");
    imagefile.splice(-1,1);
    imagefile = imagefile.join(".");
    if (imagefile != "dashboard") {
        document.getElementById("uid").textContent = imagefile;
    }
    imagefile = imagefile + ".png";
    image.src = imagefile;
    imageLoad.src = imagefile;
    
    function updateImage() {
        imageLoad.src = imageLoad.src.split("?")[0] + "?" + new Date().getTime();
        imageLoad.onload = function () {
            image.src = imageLoad.src;
        };
    }
    
    setInterval(updateImage, 1000);
}
</script>

</body>
</html>
